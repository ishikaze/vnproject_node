<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Collections</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { background: #121212; color: #eee; font-family: sans-serif; padding: 20px; }
        a { color: inherit; text-decoration: none; }
        
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 15px; }
        
        /* Create Form */
        .create-box { background: #1e1e1e; padding: 15px; border-radius: 5px; border: 1px solid #333; margin-bottom: 30px; display: flex; gap: 10px; align-items: center; }
        input[type="text"] { background: #111; border: 1px solid #444; color: white; padding: 8px; border-radius: 4px; flex: 1; }
        button { background: #007acc; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer; }

        /* Grid */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
        
        .card { background: #1e1e1e; border: 1px solid #333; border-radius: 8px; padding: 20px; transition: transform 0.2s; position: relative; }
        .card:hover { transform: translateY(-3px); border-color: #555; }
        .card h3 { margin: 0 0 10px 0; display: flex; align-items: center; gap: 10px; }
        
        .delete-btn { position: absolute; top: 15px; right: 15px; color: #666; background: none; border: none; padding: 0; }
        .delete-btn:hover { color: #d63031; }
    </style>
</head>
<body>
    <div class="header">
        <h1><i class="fa-solid fa-layer-group"></i> My Collections</h1>
        <a href="/" style="color:#aaa;"><i class="fa-solid fa-home"></i> Home</a>
    </div>

    <!-- CREATE FORM -->
    <div class="create-box">
        <strong style="color:#aaa">Create New Collection:</strong>
        <form action="/collections/create" method="POST" style="flex:1; display:flex; gap:10px;">
            <input type="text" name="name" placeholder="Collection Name (e.g. My Favorites)" required>
            <button type="submit"><i class="fa-solid fa-plus"></i> Create</button>
        </form>
    </div>

    <div class="grid">
        <% collections.forEach(c => { %>
            <div class="card">
                <% if(c.is_system === 0) { %>
                    <form action="/collections/<%= c.id %>/delete" method="POST" onsubmit="return confirm('Delete this collection?')">
                        <button class="delete-btn"><i class="fa-solid fa-trash"></i></button>
                    </form>
                <% } %>
                
                <a href="/collection/<%= c.id %>" style="display:block; height:100%;">
                    <h3>
                        <% if(c.is_system === 1) { %>
                            <i class="fa-solid fa-heart" style="color: #e84393;"></i>
                        <% } else { %>
                            <i class="fa-solid fa-folder" style="color: #00cec9;"></i>
                        <% } %>
                        <%= c.name %>
                    </h3>
                    <p style="color:#888; font-size:0.9em;">View Series &rarr;</p>
                </a>
            </div>
        <% }) %>
    </div>
</body>
</html>